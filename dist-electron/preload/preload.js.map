{"version":3,"file":"preload.js","sources":["../../electron/preload.ts"],"sourcesContent":["/**\n * Electron Preload 腳本\n * 在安全環境中暴露必要的 API 給渲染進程\n */\n\nimport { contextBridge, ipcRenderer } from 'electron';\n\n// 暴露給渲染進程的 API\ncontextBridge.exposeInMainWorld('electronAPI', {\n  // CSV 檔案操作\n  csv: {\n    // 寫入檔案（自動儲存到資料目錄）\n    writeFile: (filename: string, content: string) => \n      ipcRenderer.invoke('csv:writeFile', filename, content),\n    \n    // 讀取檔案\n    readFile: (filename: string) => \n      ipcRenderer.invoke('csv:readFile', filename),\n    \n    // 列出所有 CSV 檔案\n    listFiles: () => \n      ipcRenderer.invoke('csv:listFiles'),\n    \n    // 匯出檔案（選擇位置）\n    export: (filename: string, content: string) => \n      ipcRenderer.invoke('csv:export', filename, content),\n    \n    // 匯入檔案（選擇檔案）\n    import: () => \n      ipcRenderer.invoke('csv:import'),\n    \n    // 刪除檔案\n    deleteFile: (filename: string) => \n      ipcRenderer.invoke('csv:deleteFile', filename),\n  },\n  \n  // 應用程式資訊\n  app: {\n    getDataPath: () => \n      ipcRenderer.invoke('app:getDataPath'),\n  },\n});\n\n// 類型定義（供 TypeScript 使用）\ndeclare global {\n  interface Window {\n    electronAPI: {\n      csv: {\n        writeFile: (filename: string, content: string) => Promise<{\n          success: boolean;\n          path?: string;\n          error?: string;\n        }>;\n        readFile: (filename: string) => Promise<{\n          success: boolean;\n          content?: string;\n          exists?: boolean;\n          error?: string;\n        }>;\n        listFiles: () => Promise<{\n          success: boolean;\n          files?: Array<{\n            name: string;\n            path: string;\n            size: number;\n            modified: Date;\n          }>;\n          error?: string;\n        }>;\n        export: (filename: string, content: string) => Promise<{\n          success: boolean;\n          path?: string;\n          cancelled?: boolean;\n          error?: string;\n        }>;\n        import: () => Promise<{\n          success: boolean;\n          files?: Array<{\n            name: string;\n            path: string;\n            content: string;\n          }>;\n          cancelled?: boolean;\n          error?: string;\n        }>;\n        deleteFile: (filename: string) => Promise<{\n          success: boolean;\n          error?: string;\n        }>;\n      };\n      app: {\n        getDataPath: () => Promise<string>;\n      };\n    };\n  }\n}\n\nexport {};\n"],"names":["contextBridge","ipcRenderer"],"mappings":";;AAQAA,SAAAA,cAAc,kBAAkB,eAAe;AAAA;AAAA,EAE7C,KAAK;AAAA;AAAA,IAEH,WAAW,CAAC,UAAkB,YAC5BC,SAAAA,YAAY,OAAO,iBAAiB,UAAU,OAAO;AAAA;AAAA,IAGvD,UAAU,CAAC,aACTA,SAAAA,YAAY,OAAO,gBAAgB,QAAQ;AAAA;AAAA,IAG7C,WAAW,MACTA,SAAAA,YAAY,OAAO,eAAe;AAAA;AAAA,IAGpC,QAAQ,CAAC,UAAkB,YACzBA,SAAAA,YAAY,OAAO,cAAc,UAAU,OAAO;AAAA;AAAA,IAGpD,QAAQ,MACNA,SAAAA,YAAY,OAAO,YAAY;AAAA;AAAA,IAGjC,YAAY,CAAC,aACXA,SAAAA,YAAY,OAAO,kBAAkB,QAAQ;AAAA,EAAA;AAAA;AAAA,EAIjD,KAAK;AAAA,IACH,aAAa,MACXA,qBAAY,OAAO,iBAAiB;AAAA,EAAA;AAE1C,CAAC;"}